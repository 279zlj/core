//
// Файл : ps_matrix3x3.txt
//

//
// глобальные константы
//

sampler BaseTex; // текстура

float3 mx = 0;
float3 my = 0;

//
// стуктуры
//

struct PS_INPUT
{
     float2 base : TEXCOORD0;
};

struct PS_OUTPUT
{
     vector diffuse : COLOR0;
};

//
// главная функция
//

PS_OUTPUT Main(PS_INPUT input)
{
     // Обнуляем члены выходной структуры
     PS_OUTPUT output = (PS_OUTPUT)0;

     float2 pos;
     pos.x = input.base.x * mx.x + input.base.y * mx.y + mx.z;
     pos.y = input.base.x * my.x + input.base.y * my.y + my.z;
     
     output.diffuse = tex2D(BaseTex, pos);
     
     return output;
}